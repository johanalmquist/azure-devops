trigger:
  branches:
    include:
      - main
      - develop

pr: none

pool:
  vmImage: ubuntu-latest

resources:
  repositories:
    - repository: templates
      name: Aranya-Devops-Templates/Aranya-Devops-Templates
      type: git
  pipelines:
    - pipeline: johanalmquist.azure-devops
      source: ja
      trigger:
        branches:
          - main

variables:
  - template: commonVariables.yaml@templates
    parameters:
      azureSubscription: "Cledara - Managed Services - azure-ci-cd-playground"
  - name: my_sweet_variable
    value: "This is my sweet variable"
  - name: app
    value: "my-app"
  - name: test_var
    value: true
stages:
  - template: precheck.yaml@templates
  - template: terraform.yaml@templates
  - template: dockerbuild.yaml@templates
  - template: k8s.yaml@templates
